<div class="container">
  <div class="page-header">
    <h1>Demo Items</h1>
    <div class="header-actions">
      <button class="btn-add" (click)="toggleAddForm()" [disabled]="formSubmitting">
        {{ showAddForm ? 'Cancel' : '+ Add Demo Item' }}
      </button>
      <button class="btn-secondary" (click)="testErrorHandling()">
        Test RFC 7807 Error
      </button>
    </div>
  </div>

  <div *ngIf="config()" class="info-box">
    <p><strong>Config Loaded:</strong> Log Level = {{ config()?.logLevel }}</p>
  </div>
  
  <div *ngIf="loading()" class="loading">
    <p>Loading demo items...</p>
  </div>

  <div *ngIf="error()" class="error-box">
    <p>{{ error() }}</p>
    <button (click)="onRetry()">Retry</button>
  </div>

  <!-- Add Demo Form -->
  <div *ngIf="showAddForm" class="form-container">
    <h2>Create New Demo Item</h2>

    <form (ngSubmit)="onSubmitAdd()">
      <div *ngIf="formError" class="error-box">
        {{ formError }}
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-primary" [disabled]="formSubmitting">
          {{ formSubmitting ? 'Creating...' : 'Create Demo Item' }}
        </button>
        <button type="button" class="btn-secondary" (click)="toggleAddForm()" [disabled]="formSubmitting">
          Cancel
        </button>
      </div>
    </form>
  </div>

  <div *ngIf="!loading() && !error() && demos().length === 0" class="info-message">
    <p>No demo items found.</p>
  </div>

  <div *ngIf="!loading() && !error() && demos().length > 0">
    <div class="demo-list">
      <div class="tile" *ngFor="let demo of demos()">
        <div class="tile-header">
          <div class="tile-info">
            <h3 class="tile-title">Demo Item</h3>
            <p class="tile-subtitle">ID: {{ demo.id }}</p>
          </div>
          <button class="btn-icon btn-icon-danger" 
                  (click)="deleteDemo(demo)" 
                  title="Delete demo item">
            üóëÔ∏è
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
